<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>First Step Towards FPGA (1): SystemVerilog Quick Take &amp; Pros and Cons - Ray Eldath&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Ray Eldath&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ray Eldath&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Every time programmable hardware programming is mentioned, Verilog or SystemVerilog comes to our mind — such fact, IMHO, is ironically contrasts with another interesting, if not consensus, but at leas"><meta property="og:type" content="blog"><meta property="og:title" content="First Step Towards FPGA (1): SystemVerilog Quick Take &amp; Pros and Cons"><meta property="og:url" content="https://ray-eldath.me/hardware/fpga-journey-1/"><meta property="og:site_name" content="Ray Eldath&#039;s Blog"><meta property="og:description" content="Every time programmable hardware programming is mentioned, Verilog or SystemVerilog comes to our mind — such fact, IMHO, is ironically contrasts with another interesting, if not consensus, but at leas"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ray-eldath.me/img/fpga-1.jpg"><meta property="article:published_time" content="2020-06-16T05:40:51.000Z"><meta property="article:modified_time" content="2024-10-18T12:48:48.764Z"><meta property="article:author" content="Ray Eldath"><meta property="article:tag" content="硬件编程"><meta property="article:tag" content="SystemVerilog"><meta property="article:tag" content="FPGA"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:image" content="/img/fpga-1.jpg"><meta property="twitter:creator" content="@nagisakaworu17"><meta property="twitter:site" content="@nagisakaworu17"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ray-eldath.me/hardware/fpga-journey-1/"},"headline":"First Step Towards FPGA (1): SystemVerilog Quick Take & Pros and Cons","image":["https://ray-eldath.me/img/fpga-1.jpg"],"datePublished":"2020-06-16T05:40:51.000Z","dateModified":"2024-10-18T12:48:48.764Z","author":{"@type":"Person","name":"Ray Eldath"},"publisher":{"@type":"Organization","name":"Ray Eldath's Blog","logo":{"@type":"ImageObject","url":"https://ray-eldath.me/img/logo.png"}},"description":"Every time programmable hardware programming is mentioned, Verilog or SystemVerilog comes to our mind — such fact, IMHO, is ironically contrasts with another interesting, if not consensus, but at leas"}</script><link rel="canonical" href="https://ray-eldath.me/hardware/fpga-journey-1/"><link rel="alternate" href="/atom.xml" title="Ray Eldath&#039;s Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&amp;family=Bitter:wght@400;700&amp;family=Fira+Code&amp;display=swap"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-97484560-2" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-97484560-2');</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><!--!--><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container justify-content-center"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Ray Eldath&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/messages">留言板</a><a class="navbar-item" href="/about">关于我</a><a class="navbar-item" href="/friends">朋友们</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section" style="margin-top: 1rem"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/fpga-1.jpg" alt="First Step Towards FPGA (1): SystemVerilog Quick Take &amp; Pros and Cons"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-06-16T05:40:51.000Z" title="6/16/2020, 1:40:51 PM">2020-06-16</time></span><span class="level-item"><a class="link-muted" href="/categories/hardware/">hardware</a></span><span class="level-item">About 2600 words</span></div></div><h1 class="title is-3 is-size-4-mobile">First Step Towards FPGA (1): SystemVerilog Quick Take &amp; Pros and Cons</h1><div class="content"><p>Every time programmable hardware programming is mentioned, Verilog or SystemVerilog comes to our mind — such fact, IMHO, is ironically contrasts with another interesting, if not consensus, but at least first impression of those hardware newbies just like me, that the fundamental software and development toolkit in hardware programming field is far from diverse, mature and easy-to-use. Comparing to software engineering, there are not too much languages, tools or methodology to let you pick and choose, even among the limited available choices, most of them are either lack some important features, or just too expensive to investigate. Undoubtedly my first step towards FPGA, looking around and pick a combination of <em>language,  simulator and testing method</em>, is a brief journey, but it also involved too many investigation as well as unexpected disappointment, which makes this journey more difficult, and more tiring. This article is intended to outline some of my conclusion, which is what I’m using now, and what I have used but quited.</p>
<span id="more"></span>

<p>For me, there is a long-lasting haunting thought — writing a CPU, and that is the beginning of the story. About half a month ago I set sailed, and till now I have finished a testing library for Verilator, and a very simple MIPSs CPU that have nothing to do with pipeline, trap, and whatnot. So conclusion comes first: I’ve done most of these in combination of <strong>SystemVerilog (language) + <a target="_blank" rel="noopener" href="https://verilator.org/">Verilator</a> (simulator) + <a target="_blank" rel="noopener" href="https://www.jetbrains.com/clion/">CLion</a> (IDE) + <a target="_blank" rel="noopener" href="https://github.com/Ray-Eldath/althas">althas</a> (testing) + Xilinx Vivado (synthesis)</strong>. I will explain the reason just below. I’ll not gonna say this is the best workflow of hardware programming, specifically FPGA programming, it still have many incompetence in terms of my requirements which I’ll talk about them later as well, but I do hope this article could help you find a workflow that just suits yourself.</p>
<p><strong>This article will only discuss the very first part of my workflow, namely the SystemVerilog part.</strong> Remaining techniques will be discussed in the follow-on articles of this series, so <em>stay tuned!</em></p>
<h1 id="Verilog-SystemVerilog"><a href="#Verilog-SystemVerilog" class="headerlink" title="Verilog / SystemVerilog ?"></a>Verilog / SystemVerilog ?</h1><p><del>JUST DON’T ask why VHDL is not mentioned.</del> I won’t discuss VHDL here, for one thing I know nothing about this language, and for another I think it’s somewhat considered obsolete or just not recommended in many existing articles like <a target="_blank" rel="noopener" href="https://www.alse-fr.com/Do-I-need-SystemVerilog.html">this one</a>.</p>
<h2 id="What’s-different"><a href="#What’s-different" class="headerlink" title="What’s different?"></a>What’s different?</h2><p><em>SystemVerilog</em> has been described as a superset of <em>Verilog</em>, which is another predominant language in hardware programming field, and it certainly is. SystemVerilog have an <em>impressive outstanding compatibility</em> with Verilog, most synthesis environment, at least Xilinx Vivado, allows you to instantiate Verilog module in SystemVerilog module and vice versa. Many Verilog definition could be directly translated into SystemVerilog, without or with only little altered. Here is a piece of code taken from my  CPU project <a target="_blank" rel="noopener" href="https://github.com/Ray-Eldath/astrio">astrio</a> (currently it’s still in private, I’ll publish it once I finished pipelining, trap, AXI bus and implementation on Zynq SoC, all sort of things), it can help you — I assume you already knew Verilog, and understand what these <code>assign</code>, <code>always</code> means — glimpse at the vanilla-SystemVerilog, and understand what’s new there:</p>
<figure class="highlight verilog"><figcaption><span>>folded pc.sv</span><a target="_blank" rel="noopener" href="https://github.com/Ray-Eldath/astrio/blob/master/astrio/pc.sv">see code on GitHub</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Parameters::*;</span><br><span class="line"><span class="keyword">import</span> PCType::pc_cmd_t;</span><br><span class="line"><span class="keyword">import</span> Types::addr_t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> PC(</span><br><span class="line">    <span class="keyword">input</span> PCType::pc_cmd_t cmd,</span><br><span class="line">    <span class="keyword">input</span> addr_t load_pc,</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">bit</span> rst,</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">bit</span> clk,</span><br><span class="line">    <span class="keyword">output</span> addr_t pc,</span><br><span class="line">    <span class="keyword">output</span> addr_t inc_pc</span><br><span class="line">);</span><br><span class="line">    <span class="keyword">initial</span> pc = InstStartFrom;</span><br><span class="line"></span><br><span class="line">    addr_t next_pc;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">assign</span> inc_pc = pc+<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">always_comb</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">unique</span> <span class="keyword">case</span> (cmd)</span><br><span class="line">            PCType::NONE:</span><br><span class="line">                next_pc = pc;</span><br><span class="line">            PCType::INC:</span><br><span class="line">                next_pc = inc_pc;</span><br><span class="line">            PCType::INC_OFFSET:</span><br><span class="line">                next_pc = inc_pc+load_pc;</span><br><span class="line">            PCType::LOAD:</span><br><span class="line">                next_pc = load_pc;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                next_pc = pc;</span><br><span class="line">        <span class="keyword">endcase</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span> (rst == <span class="number">1</span>)</span><br><span class="line">            next_pc = InstStartFrom;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">always_ff</span> @(<span class="keyword">posedge</span> clk)</span><br><span class="line">        pc &lt;= next_pc;</span><br><span class="line"><span class="keyword">endmodule</span> : PC</span><br></pre></td></tr></table></figure>

<p>It’s not difficult to find out that there are many differences comparing to Verilog. I’ll highlight those are <em>most important or influential</em> in terms of the actual programming work:</p>
<h3 id="typedef-in-SystemVerilog"><a href="#typedef-in-SystemVerilog" class="headerlink" title="typedef in SystemVerilog"></a><code>typedef</code> in SystemVerilog</h3><p>You may notice that there are some <code>addr_t</code> stuff in the code, and even if you are just a newcomer of C, you may still notice that here we adhere to the general naming convention of a <code>typedef</code>, namely suffixed whatever a <code>typedef</code> with <code>_t</code>, which I think is just inherited from C’s naming conventions. So as you may assumed, <strong>SystemVerilog do have <code>typedef</code>.</strong>  Let’s look at the definition of <code>addr_t</code>:</p>
<figure class="highlight verilog"><figcaption><span>types.sv</span><a target="_blank" rel="noopener" href="https://github.com/Ray-Eldath/astrio/blob/master/astrio/types.sv">see code on GitHub</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Types;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">logic</span> <span class="keyword">unsigned</span> [<span class="number">31</span>:<span class="number">0</span>] addr_t;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">logic</span> <span class="keyword">signed</span> [<span class="number">31</span>:<span class="number">0</span>] op_t;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">reg</span> <span class="keyword">signed</span> [<span class="number">31</span>:<span class="number">0</span>] op_reg_t;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">logic</span> <span class="keyword">unsigned</span> [<span class="number">4</span>:<span class="number">0</span>] reg_id_t;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">logic</span> <span class="keyword">unsigned</span> [<span class="number">31</span>:<span class="number">0</span>] inst_t;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">reg</span> <span class="keyword">unsigned</span> [<span class="number">31</span>:<span class="number">0</span>] inst_reg_t;</span><br><span class="line"><span class="keyword">endpackage</span> : Types</span><br></pre></td></tr></table></figure>

<p>Okay, now it’s pretty clear. Generally <code>typedef</code> in SystemVerilog is no different from its counterpart in C/C++. Intuition always right, just use <code>typedef (type) (name)</code> to define your own data type in SystemVerilog to make your code more concise and configurable. BTW, <code>typedef</code> is a great replacement for <em>parameter</em> in many cases, use it wisely, and your code will definitely looks better. <strong>But, wait,</strong> what the hell is the <code>package</code>?</p>
<h3 id="package-amp-import-Package-system-and-separate-compilation"><a href="#package-amp-import-Package-system-and-separate-compilation" class="headerlink" title="package &amp; import: Package system and separate compilation"></a><code>package</code> &amp; <code>import</code>: Package system and separate compilation</h3><p>Extract the common definition of your code, wrapped them in a <em>package</em> or whatever is always a good idea. It improves the readability of your code, <strong>alleviate namespace conflicts</strong>, and enables the <em>separate compilation</em>, i.e. when the code are recompiled, only the modified part is needed to be recompiled while the common and relatively less frequently modified part can be excluded, so less files will be recompiled, therefore speed up the recompilation. SystemVerilog supports such encapsulation by providing keyword <code>package</code> and <code>import</code>: the former is for encapsulate, the latter is for import it. One thing should be noticed: if you read my codebase that linked hereinbefore, you may find that <em>only <code>typedef</code>, functions and some parameters are encapsulated in package</em>, this is because typically they are the common part of your code. I won’t encapsulate my <em>module</em> in package, seems to me it just don’t deserve.</p>
<h3 id="enum-amp-enhanced-case-clause-enumeration-works-like-a-charm"><a href="#enum-amp-enhanced-case-clause-enumeration-works-like-a-charm" class="headerlink" title="enum &amp; enhanced case clause: enumeration works like a charm"></a><code>enum</code> &amp; <em>enhanced</em> <code>case</code> clause: <em>enumeration</em> works like a charm</h3><p>In the <code>pc.sv</code> code above, there is a input <code>cmd</code> typed <code>PCType::pc_cmd_t</code>. You may guess that this is a <code>typedef</code> defined in package <code>PCType</code>, but what the actual type is? Continual reading, the input <code>cmd</code> is passed into a <code>unique case</code> clause, perhaps it’s something akin to enumeration? And <code>unique</code> means that there are no overlapping between the matching conditions, so only <strong>one</strong> block will be triggered in any cases?</p>
<p>You are right! Here’s the definition of <code>pc_cmd_t</code>:</p>
<figure class="highlight verilog"><figcaption><span>pc_type.sv</span><a target="_blank" rel="noopener" href="https://github.com/Ray-Eldath/astrio/blob/master/astrio/pc_type.sv">see code on GitHub</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> PCType;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">enum</span> <span class="keyword">bit</span> [<span class="number">1</span>:<span class="number">0</span>]&#123;</span><br><span class="line">        NONE, INC, INC_OFFSET, LOAD</span><br><span class="line">    &#125; pc_cmd_t <span class="comment">/* verilator public */</span>;</span><br><span class="line"><span class="keyword">endpackage</span> : PCType</span><br></pre></td></tr></table></figure>

<p>Here we define a <code>enum</code> that occupies a 2 bit wide <code>bit</code>, then aliased it as a <code>pc_cmd_t</code>, where we adhere to the appreciated naming conventions. The whole definition is encapsulated in a <code>package</code> named <code>PCType</code> as I discussed before. Still there are something weird — what is the <code>bit</code>? And why there is a comment <code>/* verilator public */</code>?</p>
<p>I am going to talk about the <code>bit</code> thing right now, but for the Verilator thing, till we know what Verilator is and what can it do can we grasp at the idea, so the answer is in the follow-on articles of this series.</p>
<h3 id="logic-amp-bit-abundant-but-systematic-built-in-datatype"><a href="#logic-amp-bit-abundant-but-systematic-built-in-datatype" class="headerlink" title="logic &amp; bit: abundant but systematic built-in datatype"></a><code>logic</code> &amp; <code>bit</code>: abundant but systematic built-in datatype</h3><p>In addition to the native datatypes directly inherited from Verilog, lots of new datatypes are described and added. Presumably the most crucial subset of these novel datatypes (I think many of them is just <em>excessive</em> abstraction and design and actually not so required but make the language considerably more complex. I’ll back to this point later) is <code>logic</code> and <code>bit</code>. Technically you can regard <code>logic</code> as <code>wire</code> plus <code>reg</code>. Datatype <code>logic</code> wipe out the delimited <code>wire</code> and <code>reg</code>, for synthesizer will deduce the underlying hardware (a wire or a register) automatically, using the context. But if you are declaring a <em>tristate gate</em> like <code>inout</code>, you have to use <code>wire</code> but not <code>logic</code>. Why is that? The reason is <code>logic</code>-typed variables can only have one <em>driver</em>.</p>
<p>No surprise here, <code>logic</code> still have four state: <code>0</code> (low), <code>1</code> (high), <code>X</code> (unknown) and <code>Z</code> (tristate gate high-impedance), but in many cases we can firmly believe  that only two state, <code>0</code> and <code>1</code>, will be involved. And that’s what <code>bit</code> used for. It’s a apt datatype for defining enumeration.</p>
<p>Actually there are plentiful datatypes newly added into SystemVerilog, and most of them are not mentioned here due to some reasons, and I’ll come to this later.</p>
<h3 id="always-XXX-enhanced-always-clause-enable-fine-grained-elaboration-hint"><a href="#always-XXX-enhanced-always-clause-enable-fine-grained-elaboration-hint" class="headerlink" title="always_XXX: enhanced always clause enable fine-grained elaboration hint"></a><code>always_XXX</code>: <em>enhanced</em> <code>always</code> clause enable fine-grained <em>elaboration hint</em></h3><p>Maybe the most complex, sophisticated and perplexing part of Verilog/SystemVerilog is the <code>always</code> clause. Without intensive study, profound understanding and very careful development, unintended <em>latch</em> or <em>flipflop</em> will be deduced with no warnings, which surely is a bad thing. SystemVerilog partially solve this problem by giving you <em>fine-grained elaboration hint</em>. There are three types of new enhanced <code>always</code> clause:</p>
<ul>
<li><code>always_comb</code>: Next time you write down <code>always @(*)</code>, try <code>always_comb</code>! This type of <code>always</code> clause <em>family</em> will automatically listen to all left-side wires and registers in your <code>begin … end</code> block, thus <em>sensitive signal list</em> should <strong>not</strong> be specified. Simulator and synthesizer will ensure that only <em>combinational logic</em> is deduced, and if not, a warning (or error?) will be thrown. You should not use <em>delayed assignment (<code>&lt;=</code>)</em> in the context as well.</li>
<li><code>always_ff @(...)</code>, <code>always_latch @(...)</code>: Take their names literally, these two clause is for <em>sequential logic</em>. One will <em>hints</em> simulator and synthesizer to deduce <em>flip-flop</em>, the other will deduces <em>latch</em>. The sensitive signal list is <strong>required</strong>, and you should specify the sensitive signals in it, exp. <code>always_ff @(posedge clk)</code>, just like in Verilog.</li>
</ul>
<h2 id="Silver-Bullet"><a href="#Silver-Bullet" class="headerlink" title="Silver Bullet?"></a>Silver Bullet?</h2><p><strong>But</strong> still, SystemVerilog is <strong>not</strong> the silver bullet, and here are some downsides.</p>
<h3 id="Relatively-poor-ecosystem"><a href="#Relatively-poor-ecosystem" class="headerlink" title="Relatively poor ecosystem"></a>Relatively poor ecosystem</h3><p>Before you switch to SystemVerilog (which I highly recommend, as many renowned hardware workshops and companies had done so), <strong>the very first as well as the most significant</strong> thing you should deliberately consider is ecosystem. That is to say, <strong>does the synthesizer, implementation program or IDE support SystemVerilog?</strong> And if not, apparently SystemVerilog can not be a practical option. The good news is that almost every conceivable mainstream FPGA manufacture provides development environment with bundled SystemVerilog support — but the bad news is SystemVerilog is only supported in their relatively newer version of software. Take Intel and Xilinx as example, only <em>Quartus II 11.1 and above</em> and <em>Vivado v2017.3 and above</em> support SystemVerilog. So if you’re planning to program on old devices, such as a Xilinx Spartan-6, you are not able to use SystemVerilog since Vivado only supports 7 generation FPGA products (<em>Zynq 7000 SoC</em>, <em>Artix-7</em>, <em>Kintex-7</em> and <em>Virtex-7</em>). Notice that some so-called individual manufacture, in particular <a target="_blank" rel="noopener" href="https://alchitry.com/collections/all">Alchitry</a> — the manufacture of the somewhat relatively reputable <em>cheap, newcomer-friendly</em> FPGA development board <em>Mojo</em>, do not provide SystemVerilog in their dedicated IDE as well.</p>
<p><img src="/img/fpga-1-boards.jpg" alt="Xillinx Nexys 3 and Mojo v3 — They are all Spartan-6 based."></p>
<h3 id="SystemVerilog-is-overly-complex"><a href="#SystemVerilog-is-overly-complex" class="headerlink" title="SystemVerilog is (overly?) complex"></a>SystemVerilog is (overly?) complex</h3><p>As I mentioned before, SystemVerilog is <strong>a complex HDL.</strong> But the problem is it’s not just simply complex, it’s somewhat <strong>overly and unnecessarily</strong> complex. Comparing with Verilog, actually many enhancements are reasonable, adequate and competent, but the other side is there are many features just trying to make coding in SystemVerilog as closer to coding in some high-level language, let’s say C++ and Java, as possible, and this way is just not so great. Many language features and keywords, such as datatypes <code>int</code>,  <code>longint</code>,  <code>real</code>, crappy multi-thread support, keyword <code>automatic</code> for recursive functions, they are not used in my day-to-day programming, but makes SystemVerilog unreasonably complex — as a HDL, whose theoretical role is just describes wires between hardware structures. I’ll say that this attempt, trying to “disguise” SystemVerilog as a high-level language will indeed improve the testing experience. (Personally speaking the <code>TESTBENCH</code>-based and <code>$display</code>-based testing methodology of Verilog is incredibly inefficient and grueling, I suppose the SystemVerilog way of doing things will be a lot easier) But, I still hold the belief that HDL should be a HDL <em>solely</em>, and high-level language should be a high-level language solely. It’s just redundant, and usually a bad idea to let one side covers the other side, or to “be” the other side. Given the consensus that hardware validation and testing, especially the generation of testcases should be performed in a high-level language, maybe use a high-level language to do such things will be a great idea — and <em><a target="_blank" rel="noopener" href="https://www.veripool.org/wiki/verilator">Verilator</a></em> is created for this. I will cover Verilator and related topics in the next article.</p>
<p>After all, this is just a personal preference and personal perspective, and <em>language is just a tool</em>. If it’s too complicated, just pick out the acceptable part: and this is exactly what I’m doing. Use what I called vanilla-SystemVerilog is just stick to the principle that SystemVerilog is <strong>nothing but</strong> a HDL language, you should only use the HDL part of it, take is as a “better Verilog”, use entirely a handful of features and enhancements including what I mentioned before.</p>
<h3 id="Limited-features"><a href="#Limited-features" class="headerlink" title="Limited features"></a>Limited features</h3><p>Even if your environment fully support SystemVerilog in elaboration, synthesis and implementation, your switch may still not very pleasant as you may expected. Specifically, my <em>Vivado v2019.2</em> satisfactorily supports SystemVerilog in normal develop procedure, but you <strong>can’t</strong> add your SystemVerilog modules to your Block Design directly. Overall this is not a big problem, in my case all I need is just to create a wrapper in Verilog then linked IPs to that wrapper, but your mileage may vary.</p>
<p><img src="/img/fpga-1-vivado.jpg" alt="Xilinx Vivado v2019.2"></p>
<h2 id="It-all-depends"><a href="#It-all-depends" class="headerlink" title="It all depends."></a>It all depends.</h2><p>Eventually comes the golden rule of selecting things in the realm of techniques, technicians, languages and programmers — “**It all depends.**” As I said, <em>language is nothing but a tool</em>, how to use it and to what extent will you use it in the daily basis, is just personal predilections. Tons of tutorials and blog posts will teach you how to use SystemVerilog as a high-level language and do validation things in such way elegantly — and I bet many people are good at it. But I’m just not on their side, nor am I appreciate their methodology.</p>
<p>Hope this article will help you get the basic difference, pros and cons of SystemVerilog, comparing with Verilog, and then decide whether to put it in your own workflow. The next passage will cover another facet of my workflow — Verilator, it lets you simulate and validate your DUT in C++/System C, which is a lot better then do such things in HDL, personally speaking.</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>First Step Towards FPGA (1): SystemVerilog Quick Take &amp; Pros and Cons</p><p><a href="https://ray-eldath.me/hardware/fpga-journey-1/">https://ray-eldath.me/hardware/fpga-journey-1/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Ray Eldath</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-06-16</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-10-18</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="CC BY-NC 4.0" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E7%A1%AC%E4%BB%B6%E7%BC%96%E7%A8%8B/">硬件编程</a><a class="link-muted mr-2" rel="tag" href="/tags/SystemVerilog/">SystemVerilog</a><a class="link-muted mr-2" rel="tag" href="/tags/FPGA/">FPGA</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a><a class="a2a_button_email"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_qzone"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content" style="padding: 3em"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/mm_reward_qrcode_1606242853784.png" alt="Wechat"></span></a><a class="button donate" href="https://www.buymeacoffee.com/RayEldath" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/life/freshman/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">我的大一啊，sigh</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/literature/albert-camus/"><span class="level-item">阿尔贝·加缪其人</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="content" id="waline-thread"></div><script src="https://cdn.jsdelivr.net/npm/@waline/client@1.3.11/dist/Waline.min.js"></script><script>Waline({
            el: '#waline-thread',
            serverURL: "https://waline-ray-eldath-me.vercel.app/",
            lang: "zh-CN",
            visitor: false,
            emoji: ["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"],
            
            meta: ["nick","mail","link"],
            requiredMeta: ["nick","mail"],
            login: "enable",
            avatar: "retro",
            
            pageSize: 10,
            avatarCDN: "https://sdn.geekzu.org/avatar/",
            avatarForce: false,
            highlight: true,
            mathTagSupport: false,
            copyright: true,
            
        });</script></div></div></div><div class="column column-left is-4-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Verilog-SystemVerilog"><span class="level-left"><span class="level-item">1</span><span class="level-item">Verilog / SystemVerilog ?</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#What’s-different"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">What’s different?</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#typedef-in-SystemVerilog"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">typedef in SystemVerilog</span></span></a></li><li><a class="level is-mobile" href="#package-amp-import-Package-system-and-separate-compilation"><span class="level-left"><span class="level-item">1.1.2</span><span class="level-item">package &amp; import: Package system and separate compilation</span></span></a></li><li><a class="level is-mobile" href="#enum-amp-enhanced-case-clause-enumeration-works-like-a-charm"><span class="level-left"><span class="level-item">1.1.3</span><span class="level-item">enum &amp; enhanced case clause: enumeration works like a charm</span></span></a></li><li><a class="level is-mobile" href="#logic-amp-bit-abundant-but-systematic-built-in-datatype"><span class="level-left"><span class="level-item">1.1.4</span><span class="level-item">logic &amp; bit: abundant but systematic built-in datatype</span></span></a></li><li><a class="level is-mobile" href="#always-XXX-enhanced-always-clause-enable-fine-grained-elaboration-hint"><span class="level-left"><span class="level-item">1.1.5</span><span class="level-item">always_XXX: enhanced always clause enable fine-grained elaboration hint</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Silver-Bullet"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Silver Bullet?</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Relatively-poor-ecosystem"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">Relatively poor ecosystem</span></span></a></li><li><a class="level is-mobile" href="#SystemVerilog-is-overly-complex"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">SystemVerilog is (overly?) complex</span></span></a></li><li><a class="level is-mobile" href="#Limited-features"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">Limited features</span></span></a></li></ul></li><li><a class="level is-mobile" href="#It-all-depends"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">It all depends.</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/programming/deep-dive-in-6824/"><img src="/img/deep-dive-in-6824.jpg" alt="深入 MIT 6.824：实现 LeaseRead 和全异步 shardkv"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-03-15T14:33:40.000Z">2022-03-15</time></p><p class="title"><a href="/programming/deep-dive-in-6824/">深入 MIT 6.824：实现 LeaseRead 和全异步 shardkv</a></p><p class="categories"><a href="/categories/programming/">programming</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-03-09T16:00:00.000Z">2022-03-10</time></p><p class="title"><a href="/notice/now-support-email-notice/">本博客评论区现已支持邮件提醒</a></p><p class="categories"><a href="/categories/notice/">notice</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/life/the-end-of-2021/"><img src="/img/the-end-of-2021.jpg" alt="记忆、目光、另一种迷惘：the end of 2021"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-01-06T07:19:14.000Z">2022-01-06</time></p><p class="title"><a href="/life/the-end-of-2021/">记忆、目光、另一种迷惘：the end of 2021</a></p><p class="categories"><a href="/categories/life/">life</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-22T08:56:22.000Z">2021-06-22</time></p><p class="title"><a href="/life/what-left-behind/">还有什么应该去写的事情？</a></p><p class="categories"><a href="/categories/life/">life</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-04-25T18:28:31.000Z">2021-04-26</time></p><p class="title"><a href="/literature/poem-nothing-but-thee/">一无所有</a></p><p class="categories"><a href="/categories/literature/">literature</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/FPGA/"><span class="tag">FPGA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rust/"><span class="tag">Rust</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SystemVerilog/"><span class="tag">SystemVerilog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"><span class="tag">不务正业</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%98%E5%82%A8%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"><span class="tag">存储和分布式系统</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">总结</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E5%AD%A6/"><span class="tag">文学</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9E%B6%E5%AD%90%E9%BC%93/"><span class="tag">架子鼓</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B2%A1%E4%BB%80%E4%B9%88%E7%94%A8%E7%9A%84%E5%9B%9E%E5%BF%86/"><span class="tag">没什么用的回忆</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BC%94%E5%8C%96%E7%94%9F%E7%89%A9%E5%AD%A6/"><span class="tag">演化生物学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%B5%E5%A3%AB%E9%BC%93/"><span class="tag">爵士鼓</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%9F%E7%89%A9%E5%AD%A6/"><span class="tag">生物学</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%97%85%E6%AF%92%E5%AD%A6/"><span class="tag">病毒学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%9F%AB%E6%83%85/"><span class="tag">矫情</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A1%AC%E4%BB%B6%E7%BC%96%E7%A8%8B/"><span class="tag">硬件编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%91%E5%B9%BB/"><span class="tag">科幻</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F%EF%BC%88paradigm%EF%BC%89/"><span class="tag">程序设计范式（paradigm）</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80/"><span class="tag">程序设计语言</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BF%BB%E8%AF%91/"><span class="tag">翻译</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%97%E6%AD%8C/"><span class="tag">诗歌</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%98%BF%E5%B0%94%E8%B4%9D%C2%B7%E5%8A%A0%E7%BC%AA/"><span class="tag">阿尔贝·加缪</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9F%B3%E4%B9%90/"><span class="tag">音乐</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Ray Eldath&#039;s Blog" height="28"></a><p><span>&copy;2024. Ray Eldath</span>. Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus.</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button link-muted is-transparent is-large" target="_blank" rel="noopener" title="本站所有文章基于 CC-BY-NC 4.0 协议授权" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><style>
                    :root {
                        --waline-theme-color: #3273dc;
                        --waline-active-color: #2a5db0;
                    }
                </style></body></html>